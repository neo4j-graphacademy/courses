= Create a Movie Resource
:type: challenge
:order: 8


In the previous lesson, you learned about resources and how they differ from tools.


In this challenge, you will add a resource to your _Movies GraphRAG Server_ that exposes detailed movie information by its `tmdbId` property,


== Challenge Goals

To complete this challenge, you will:

1. Add a movie resource with a dynamic URI pattern
2. Query Neo4j for comprehensive movie details
3. Format the output as readable markdown
4. Include cast, genres, directors, and plot information
5. Test the resource with the MCP Inspector


== Step 1: Understanding the Resource URI

Resources use URI patterns to identify what data to fetch.

For a movie resource, we'll use the pattern: `movie://{tmdb_id}`


**Examples:**

* `movie://603` - The Matrix
* `movie://605` - The Matrix Reloaded
* `movie://13` - Forrest Gump


This allows clients to request specific movies by their TMDB ID.


== Step 2: Create the Resource Function

Add this resource to your `server/main.py` file, after your existing tools:

[source,python]
----
include::code/solution.py[tag=get_movie_resource]
----


**Key points in this code:**

1. **URI pattern**: `movie://{tmdb_id}` - The `tmdb_id` parameter is extracted from the URI
2. **Comprehensive query**: Fetches movie details, genres, cast, and directors in one query
3. **Markdown formatting**: Returns nicely formatted text for readability
4. **Error handling**: Handles missing movies gracefully


== Step 3: Test with MCP Inspector

Start your server with the Inspector:

[source,bash]
----
npx @modelcontextprotocol/inspector uv --directory $PWD/server run main.py
----


=== Test Popular Movies

Try these TMDB IDs in the MCP Inspector:

* `603` - The Matrix (1999)
* `13` - Forrest Gump (1994)
* `550` - Fight Club (1999)
* `680` - Pulp Fiction (1994)


**To test:**

1. Connect to your server in the Inspector
2. Go to the **Resources** tab
3. You should see your resource template: `movie://{tmdb_id}`
4. Enter a TMDB ID (e.g., `603`)
5. Click **Read Resource**


You should see formatted output like:

[source,markdown]
----
# The Matrix (1999)

_Welcome to the Real World_

**Rating:** 8.7/10
**Runtime:** 136 minutes
**Genres:** Action, Science Fiction
**Director(s):** Lilly Wachowski, Lana Wachowski

## Plot
Set in the 22nd century, The Matrix tells the story of a computer hacker...

## Cast
- Keanu Reeves as Neo
- Laurence Fishburne as Morpheus
- Carrie-Anne Moss as Trinity
- Hugo Weaving as Agent Smith
- Gloria Foster as Oracle
----



read::My movie resource is working![]



[.summary]
== Summary

In this challenge, you successfully created a movie resource:

* **Dynamic URI pattern** - `movie://{tmdb_id}` for flexible resource access
* **Comprehensive query** - Fetched movie details, cast, genres, and directors
* **Markdown formatting** - Created readable, structured output
* **Error handling** - Gracefully handled missing movies
* **Resource design** - Understood when to use resources vs tools

Your server now exposes data in two ways: tools for searches and resources for specific entities.

In the next lesson, you'll learn about pagination for handling large datasets.
