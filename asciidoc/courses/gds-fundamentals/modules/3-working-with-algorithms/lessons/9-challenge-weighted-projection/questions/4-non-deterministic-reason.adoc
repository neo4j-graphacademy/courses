[.question]
= What Does the topK Parameter Control?

What does setting `topK: 3` do in Node Similarity?

* [ ] It only analyzes the top 3 most connected nodes
* [ ] It limits the algorithm to 3 iterations
* [x] It returns only the 3 most similar nodes for each node in the graph
* [ ] It requires nodes to have at least 3 neighbors to be included

[TIP,role=hint]
.Hint
====
The "K" in topK refers to "K nearest neighbors"—how many similar matches do you want for each node?
====

[TIP,role=solution]
.Solution
====
**It returns only the 3 most similar nodes for each node in the graph.**

`topK` controls how many similarity relationships are kept per node. With `topK: 3`:

- For each user, only the 3 most similar users are returned
- This prevents overwhelming results (without topK, you'd get similarities for all possible pairs)
- It's memory-efficient and practical for recommendations

**Example:**

If you have 100 users:

- Without `topK`: Up to 4,950 similarity pairs could be returned (100 × 99 ÷ 2)
- With `topK: 3`: Maximum of 300 pairs (100 users × 3 similar users each)

**When to adjust topK:**

- **Smaller topK (1-3)**: For "best match" recommendations, faster processing
- **Larger topK (10-20)**: For more comprehensive similarity networks, broader recommendations
- **No topK**: When you need all similarity scores above a threshold (use `similarityCutoff` instead)

For recommendation systems, `topK: 3-10` is typical—you want the most similar users, not all somewhat-similar users.
====
