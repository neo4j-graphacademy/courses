= Creating Relationships
:type: lesson
:order: 4

[.slide.discrete]
== Introduction

You learned how to import nodes and map their properties from CSV files. To make the graph useful for queries, you need to connect those nodes with relationships.

In this lesson, you will learn how to create relationships between the Northwind nodes using Data Importer.

[.slide]
== Understanding relationship mapping

Relationships connect entities and make the graph useful for queries.

image::images/acted_in.svg[Relationship,width=400,align=center]

Relationships in Data Importer need:

// ```mermaid
// flowchart TD
//     A[Relationship] --> B[Type Name]
//     A --> C[Source Node]
//     A --> D[Target Node]
//     A --> E[Matching IDs]
//     A --> F[Properties optional]
// ```

1. **Type** - The relationship name (e.g., PLACED, ORDERS)
2. **Source** - Which node it starts from
3. **Target** - Which node it points to
4. **IDs** - How to match source and target nodes
5. **Properties** - Optional attributes on the relationship

[.slide]
== Creating the Customer PLACED Order relationship

```mermaid
graph LR
    A[Customer] -->|PLACED| B[Order]
```

This relationship connects customers to their orders.

[.slide.discrete]
=== Drawing the relationship

1. Hover over the **Customer** node edge
2. Click the **+** button that appears
3. Drag to the **Order** node
4. A relationship line appears

[.slide.discrete]
=== Configuring the relationship

In the details panel:

* **Type**: `PLACED`
* **From file**: `orders.csv`
* **From ID**: Match `customerID` from CSV to `customerId` property
* **To ID**: Match `orderID` from CSV to `orderId` property

// ```mermaid
// flowchart LR
//     A["orders.csv<br/>customerID: ALFKI<br/>orderID: 10248"] --> B[Match]
//     B --> C[Customer: ALFKI]
//     B --> D[Order: 10248]
//     C -->|PLACED| D
// ```

No properties needed on this relationship.

[.slide]
== Creating the Product PART_OF Category relationship

```mermaid
graph LR
    A[Product] -->|PART_OF| B[Category]
```

[.slide.discrete]
=== Configuration steps

1. Drag from **Product** node to **Category** node
2. Set type to `PART_OF`
3. **From file**: `products.csv`
4. **From ID**: Match `productID` to `productId`
5. **To ID**: Match `categoryID` to `categoryId`

[.slide]
== Creating the Product SUPPLIED_BY Supplier relationship

```mermaid
graph LR
    A[Product] -->|SUPPLIED_BY| B[Supplier]
```

[.slide.discrete]
=== Configuration steps

1. Drag from **Product** node to **Supplier** node
2. Set type to `SUPPLIED_BY`
3. **From file**: `products.csv`
4. **From ID**: Match `productID` to `productId`
5. **To ID**: Match `supplierID` to `supplierId`

[.slide]
== Creating the Order ORDERS Product relationship with properties

```mermaid
graph LR
    A[Order] -->|"ORDERS<br/>quantity<br/>unitPrice<br/>discount"| B[Product]
```

This relationship is special because it has properties: quantity, unit price, and discount.

[.slide.discrete]
=== Downloading the order details CSV

For this relationship, you will need the `order-details.csv` file:

* Download: link:https://data.neo4j.com/northwind/order-details.csv[order-details.csv^]
* Upload it to Data Importer

[.slide.discrete]
=== Drawing the relationship

1. Drag from **Order** node to **Product** node
2. Set type to `ORDERS`
3. **From file**: `order-details.csv`
4. **From ID**: Match `orderID` to `orderId`
5. **To ID**: Match `productID` to `productId`

[.slide.discrete]
=== Adding relationship properties

In the details panel, add these properties:

[options="header"]
|===
| CSV Column | Property | Type

| quantity | quantity | Integer
| unitPrice | unitPrice | Float
| discount | discount | Float
|===

```mermaid
graph LR
    A[Order: 10248] -->|"ORDERS<br/>quantity: 12<br/>unitPrice: 18.00<br/>discount: 0.0"| B[Product: Chai]
```

[.slide]
== Creating the Employee SOLD Order relationship

```mermaid
graph LR
    A[Employee] -->|SOLD| B[Order]
```

[.slide.discrete]
=== Configuration steps

1. Drag from **Employee** node to **Order** node
2. Set type to `SOLD`
3. **From file**: `orders.csv`
4. **From ID**: Match `employeeID` to `employeeId`
5. **To ID**: Match `orderID` to `orderId`

[.slide]
== Creating the Employee REPORTS_TO Employee relationship

```mermaid
graph LR
    A[Employee] -->|REPORTS_TO| B[Employee]
```

This is a **self-referencing relationship** - employees report to other employees.

[.slide.discrete]
=== Configuration steps

1. Drag from **Employee** node back to itself
2. Set type to `REPORTS_TO`
3. **From file**: `employees.csv`
4. **From ID**: Match `employeeID` to `employeeId`
5. **To ID**: Match `reportsTo` to `employeeId`

[NOTE]
.Self-referencing relationship
====
The `employees.csv` file has a `reportsTo` column containing the ID of the manager. This creates the hierarchy.
====

[.slide]
== Reviewing the complete data model

Your canvas should now show the complete Northwind graph model:

```mermaid
graph TB
    Customer[Customer] -->|PLACED| Order[Order]
    Order -->|ORDERS| Product[Product]
    Product -->|PART_OF| Category[Category]
    Product -->|SUPPLIED_BY| Supplier[Supplier]
    Employee[Employee] -->|SOLD| Order
    Employee -->|REPORTS_TO| Employee
```

All relationships should have:

* ✓ Type names set
* ✓ Source/target nodes connected
* ✓ CSV files assigned
* ✓ ID mappings configured
* ✓ Properties mapped (for ORDERS relationship)


[.summary]
== Summary

In this lesson, you learned how to create relationships between nodes in Data Importer.

You created six relationships for the Northwind graph:

* **Customer PLACED Order** - connects customers to their orders
* **Product PART_OF Category** - organizes products by category
* **Product SUPPLIED_BY Supplier** - tracks product suppliers
* **Order ORDERS Product** - links orders to products with properties (quantity, unitPrice, discount)
* **Employee SOLD Order** - tracks which employee processed an order
* **Employee REPORTS_TO Employee** - creates a management hierarchy

In the next lesson, you will run the import to load all the data into your Neo4j database.
