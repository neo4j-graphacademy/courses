= Importing IN_CATEGORY Relationships
:type: challenge
:order: 3
:duration: 10
:optional: true

// Optional import of Product -[:IN_CATEGORY]-> Category relationships

[.slide.discrete]
== Importing IN_CATEGORY relationships

You imported Product and Category nodes separately in previous lessons. Relationships connect these nodes together to show which products belong to which categories.


In this lesson, you will import IN_CATEGORY relationships to connect products to their categories.


[.slide]
== The challenge

Import IN_CATEGORY relationships from the products.csv file (already loaded in Data Importer).

**Success criteria:**

* ✅ Create relationships with the type `IN_CATEGORY`
* ✅ Connect existing Product nodes to existing Category nodes
* ✅ Match using `productId` and `categoryId`
* ✅ Verify you have 77 IN_CATEGORY relationships in your graph


[.slide]
== Using the data importer

The files are already loaded. Now create relationships from products.csv:

1. Open Import tool in Aura
2. Select `products.csv` from the loaded files
3. Instead of creating nodes, **add a relationship**
4. Set the relationship type to `IN_CATEGORY`
5. Configure the **From node** (Product):
   - Label: `Product`
   - ID property: `productId`
   - Maps to CSV column: `productID`
6. Configure the **To node** (Category):
   - Label: `Category`
   - ID property: `categoryId`
   - Maps to CSV column: `categoryID`
7. Run the import

**Expected result:** 77 IN_CATEGORY relationships created (one for each product)


[.slide]
== Verifying your work

After the import completes, validate with these queries:

**Query 1: Count relationships**

[source,cypher]
----
MATCH (:Product)-[r:IN_CATEGORY]->(:Category)
RETURN count(r) AS relationshipCount;
----

**Expected result:** 77 relationships


**Query 2: View products with their categories**

[source,cypher]
----
MATCH (p:Product)-[:IN_CATEGORY]->(c:Category)
RETURN p.productName, c.categoryName
ORDER BY c.categoryName, p.productName
LIMIT 10;
----

**Expected result:** You should see products like "Chai" → "Beverages", "Chang" → "Beverages", etc.


**Query 3: Count products per category**

[source,cypher]
----
MATCH (c:Category)<-[:IN_CATEGORY]-(p:Product)
RETURN c.categoryName, count(p) AS productCount
ORDER BY productCount DESC;
----

**Expected result:** Confections (13 products), Condiments (12 products), etc.


[.slide]
== Understanding richer recommendations

Categories allow for **category-based recommendations**:

```
(:Customer)-[:PLACED]->(:Order)-[:CONTAINS]->(:Product)-[:IN_CATEGORY]->(:Category)
```

**Without categories:**
* "Customers like you bought Chai"

**With categories:**
* "Customers like you like Beverages - try Chang or Guaraná Fantástica"
* "Explore more products from the Confections category"
* Filter recommendations by category preference

**This is an enrichment** - the basic recommendation query doesn't need categories.


[.slide]
== Understanding the pattern

This is your first **relationship import**:

**Key differences from node imports:**

* **Relationships require two nodes** - both must already exist in the graph
* **Matching by ID** - you specify which properties to match on (productId, categoryId)
* **Direction matters** - Product → Category (not Category → Product)
* **No properties needed** - IN_CATEGORY is just a connection (no quantity, price, etc.)

**Why use products.csv?**

The products.csv file contains both `productID` and `categoryID` columns, making it perfect for connecting the two node types.


[.slide]
== Troubleshooting

**If you don't see 77 relationships:**

* Make sure both Product and Category nodes exist first (run the count queries from previous lessons)
* Check that you selected **relationship** (not node) in the import tool
* Verify the relationship type is `IN_CATEGORY` (all caps, underscore)
* Check that Product matches on `productId` and Category matches on `categoryId`
* Make sure the direction is Product → Category

**If products.csv creates duplicate nodes:**

* Delete the import and start over
* Make sure you chose "Add relationship" not "Add node"

**If verification fails:**

* Open the Query tool
* Run the count query manually
* Check the Import tool for error messages


[.summary]
== Summary

In this optional challenge, you imported IN_CATEGORY relationships:

* **Selected** products.csv from the loaded files
* **Created** relationships (not nodes) with type IN_CATEGORY
* **Matched** existing Product nodes using productId
* **Matched** existing Category nodes using categoryId
* **Verified** 77 relationships with Cypher queries

**Key skill:** You now understand the difference between node imports and relationship imports.

**This lesson is optional** - categories enrich recommendations but aren't required for Module 3.

**Next:** Move to Module 3 to learn about modeling and creating the PLACED and CONTAINS relationships.

read::Proceed to next module[]
