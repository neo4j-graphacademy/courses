= Modeling Relationships
:type: lesson
:order: 4


[.slide]
== Understanding Relationships

You have learned about nodes and labels, which represent the entities in your graph.

Now you will learn how to connect these nodes using relationships.


In this lesson, you will learn about relationships, how they work in Neo4j, and how to model the relationships for the Northwind dataset.


You will understand how relationships connect your nodes and make your graph database powerful.


[.slide]
== What are Relationships?

**Relationships** connect nodes and represent associations between entities. They are the key feature that makes graph databases powerful.


Every relationship:

* Has a **type** (name)
* Has a **direction** (from one node to another)
* Can have **properties** (attributes)
* Connects exactly two nodes


```mermaid
graph LR
    A[Node A] -->|RELATIONSHIP_TYPE| B[Node B]
```


[.slide.discrete]
== Why Relationships Matter

In traditional databases, relationships are implicit (foreign keys requiring JOINs). In graph databases, relationships are:


* **Explicit** - First-class citizens in the data model
* **Fast** - No JOINs needed, direct traversal
* **Semantic** - The relationship type describes the connection
* **Bidirectional** - Can be traversed in either direction


```mermaid
graph TB
    A[Graph Relationships] --> B[Fast Traversal]
    A --> C[No JOINs]
    A --> D[Self-Documenting]
    A --> E[Flexible Schema]
```


[.slide.discrete]
== Relationship Direction

Every relationship has a direction, but you can traverse relationships in either direction in your queries.


```mermaid
graph LR
    A[Customer] -->|PLACED| B[Order]

    C[Query can traverse]
    C -->|Forward| D[Customer to Order]
    C -->|Backward| E[Order to Customer]
```


The direction should represent the natural flow of the relationship.


[.slide.discrete]
== Northwind Relationships

Let's define the relationships for the Northwind domain:


```mermaid
graph TB
    A[Customer] -->|PLACED| B[Order]
    B -->|ORDERS| C[Product]
    C -->|PART_OF| D[Category]
    C -->|SUPPLIED_BY| E[Supplier]
    F[Employee] -->|SOLD| B
    F -->|REPORTS_TO| F
```


| Relationship | From | To | Meaning |
|--------------|------|-----|---------|
| `PLACED` | Customer | Order | Customer placed an order |
| `ORDERS` | Order | Product | Order contains a product |
| `PART_OF` | Product | Category | Product belongs to category |
| `SUPPLIED_BY` | Product | Supplier | Product supplied by supplier |
| `SOLD` | Employee | Order | Employee processed order |
| `REPORTS_TO` | Employee | Employee | Employee reports to manager |


[.slide.discrete]
== Relationship Naming Conventions

When naming relationships:


* **Use verbs** - Relationships are actions or associations
* **Use UPPER_SNAKE_CASE** - All caps with underscores
* **Be specific** - `PLACED` is better than `RELATED_TO`
* **Read naturally** - `(Customer)-[:PLACED]->(Order)` reads like a sentence


```mermaid
graph LR
    A[Good Names] --> B[PLACED]
    A --> C[REPORTS_TO]
    A --> D[SUPPLIED_BY]

    E[Avoid] --> F[has]
    E --> G[related]
    E --> H[PlacedOrder]
```


[.slide.discrete]
== Multiple Relationships

Nodes can have multiple relationships of the same or different types:


```mermaid
graph TB
    A[Customer: ACME] -->|PLACED| B[Order: #10248]
    A -->|PLACED| C[Order: #10249]
    A -->|PLACED| D[Order: #10250]

    B -->|ORDERS| E[Product: Chai]
    B -->|ORDERS| F[Product: Coffee]
```


This is natural in graphs - one customer places many orders, one order contains many products.


[.slide.discrete]
== Self-Referencing Relationships

A node can have a relationship to itself (same label). In Northwind, employees report to other employees:


```mermaid
graph LR
    A[Employee: Nancy] -->|REPORTS_TO| B[Employee: Andrew]
    C[Employee: Janet] -->|REPORTS_TO| B
    D[Employee: Margaret] -->|REPORTS_TO| A
```


This creates a hierarchy or tree structure within the graph.


[.slide.discrete]
== Relationship Properties

Relationships can store properties too. For example, the `ORDERS` relationship might include:


* `quantity` - How many units were ordered
* `unitPrice` - Price per unit at time of order
* `discount` - Discount percentage applied


```mermaid
graph LR
    A[Order] -->|"ORDERS<br/>quantity: 10<br/>unitPrice: 18.00<br/>discount: 0.05"| B[Product]
```


This is important in Northwind because:

* Product prices can change over time
* Different orders might have different prices/discounts
* Quantity varies per order


[.slide.discrete]
== Fanout

**Fanout** is when one node connects to many others. This is common and performant in Neo4j:


```mermaid
graph TB
    A[Product: Chai] -->|SUPPLIED_BY| B[Supplier: Exotic Liquids]
    A -->|PART_OF| C[Category: Beverages]

    D[Order: #10248] -->|ORDERS| A
    E[Order: #10249] -->|ORDERS| A
    F[Order: #10250] -->|ORDERS| A
    G[Order: #10251] -->|ORDERS| A
```


A popular product might appear in thousands of orders - Neo4j handles this efficiently.


[.slide.discrete]
== Complete Northwind Data Model

Here's the complete data model with all nodes and relationships:


```mermaid
graph TB
    Customer[Customer] -->|PLACED| Order[Order]
    Order -->|ORDERS| Product[Product]
    Product -->|PART_OF| Category[Category]
    Product -->|SUPPLIED_BY| Supplier[Supplier]
    Employee[Employee] -->|SOLD| Order
    Employee -->|REPORTS_TO| Employee
```


[.summary]
== Summary

In this lesson, you learned:


* Relationships connect nodes and represent associations
* Relationships have types, direction, and properties
* Relationship naming conventions (verbs, UPPER_SNAKE_CASE)
* Multiple relationships between nodes are common
* Self-referencing relationships create hierarchies
* The complete Northwind data model with relationships


In the next lesson, you will learn how to define properties for nodes and relationships.
