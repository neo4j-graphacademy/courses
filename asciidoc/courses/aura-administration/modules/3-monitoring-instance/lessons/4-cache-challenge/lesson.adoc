=  Cache Performance
:type: challenge
:order: 4


== Scenario

Over the past month, users have been complaining about slowly degrading query performance.

"The same reports that used to take 2 seconds now take 10-15 seconds."

Reviewing Instance metrics, you notice:

* **Page Cache Hit Ratio**: Declined from 99% to 87% over the past month
* **Page Cache Usage Ratio**: Sitting at 100%
* **Page Cache Evictions**: 5,000-8,000 per minute (was 100-500 per minute)
* **Heap Memory**: Normal at 65%
* **CPU Usage**: Normal at 55%
* **Database Store Size**: Grew from 95GB to 145GB over the past month

The application hasn't changed, but the amount of data continues to grow as users add more content.


== The Challenge

How should you restore query performance?


include::questions/1-cache-performance.adoc[leveloffset=+1]


[.summary]
== Summary

When database growth outpaces available memory, query performance degrades as the cache hit ratio drops. Scale the instance to fit the growing graph in memory

**Why scaling is the answer:**

* Larger instance provides more page cache memory
* Goal: Get the full graph back into memory
* Restores hit ratio to 98-100%
* Returns query performance to normal

**Monitoring tip:**

Watch the relationship between database size and page cache hit ratio.

When your database grows beyond page cache capacity, performance will degrade predictably.

Plan for scaling before this happens by monitoring growth trends.

