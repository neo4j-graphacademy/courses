= Query Log Overview
:type: lesson
:order: 1


[.discrete]
== Introduction

Query logs provide detailed visibility into every query executed against your database.

In this lesson, you will learn how to access query logs and understand the two main views: Summary and Details.


== Accessing Query Logs

To access query logs:

. Navigate to your Aura instance
. Click **Operations** in the menu
. Select **Logs**
. Choose the **Query** tab

Query logs show detailed information about all queries executed against your database.


== Query Log Interface

The query log interface provides:


=== Query Timeline

Visual representation showing:

* **Queries per minute**: Overall query volume
* **Failed queries per minute**: Error rate
* **Query latency (99th percentile)**: Performance trend

This timeline helps you quickly identify when issues occurred.


=== Two Main Tabs

**Summary tab**: Aggregated view of query patterns

**Details tab**: Individual query executions


== The Summary Tab

The Summary tab aggregates queries by their Cypher text (minus parameters).


=== What It Shows

For each unique query pattern:

* **Status**: Completed or failed
* **Query**: Cypher text without parameter values
* **Count**: Number of times executed in the period
* **From**: First execution time
* **To**: Last execution time
* **Total time spent**: Total execution time for all runs
* **Avg time**: Average execution time
* **Min time**: Fastest execution
* **Max time**: Slowest execution
* **Avg waiting**: Average time waiting for resources
* **Avg bytes**: Average memory allocated
* **Avg page hits**: Average page cache hits (good)
* **Avg page faults**: Average page cache misses (bad)
* **Cypher language**: Version of Cypher used


=== When to Use Summary Tab

The Summary tab is perfect for:

* Identifying frequently executed queries
* Finding queries that consume the most total time
* Spotting queries with high average duration
* Understanding overall query patterns
* Finding queries to optimize for maximum impact


== The Details Tab

The Details tab shows individual query executions.


=== What It Shows

For each query execution:

* **Status**: Completed or failed
* **Query**: Exact Cypher text executed
* **End time**: When the query completed
* **Duration**: Total execution time (ms)
* **Planning**: Time spent planning the query (ms)
* **Waiting**: Time waiting for resources (ms)
* **User**: Database user who executed the query
* **Transaction ID**: Unique transaction identifier
* **Database**: Target database name
* **Driver**: Client driver signature
* **Application**: Application name (from driver metadata)
* **Alloc bytes**: Memory allocated
* **Page hits**: Data found in page cache
* **Page faults**: Data read from disk
* **Query language**: Cypher version


=== When to Use Details Tab

The Details tab is perfect for:

* Investigating specific slow query executions
* Understanding when a particular query ran
* Correlating queries with user complaints
* Debugging application-specific issues
* Tracking down intermittent problems


== Understanding Query Metrics


=== Duration

Total time from query start to completion.

* **Fast**: < 100ms
* **Acceptable**: 100-1000ms
* **Slow**: > 1000ms
* **Very slow**: > 5000ms

Context matters - complex reports can legitimately take seconds.


=== Planning Time

Time spent creating the execution plan.

* **Normal**: < 50ms
* **High**: > 100ms

High planning time indicates:

* Novel query (first time executed)
* Query not using parameters
* Database schema changes
* Statistics need updating


=== Waiting Time

Time spent waiting for resources.

* **Normal**: 0-10ms
* **High**: > 100ms

High waiting time indicates:

* Lock contention
* Resource constraints
* Concurrent query competition


=== Page Hits vs. Page Faults

**Page hits**: Data found in memory (fast)

**Page faults**: Data read from disk (slow)

* **Good**: High page hits, low page faults
* **Bad**: Low page hits, high page faults

High page faults indicate data not fitting in page cache.


== Common Indicators


=== Frequently Run Queries

High count indicates:

* Core application functionality
* Prime optimization target
* Small improvements have big impact


=== High Total Time Spent

Combination of frequency and duration:

* May not be slowest query
* But consumes most database time overall
* Excellent optimization candidate


=== High Average Duration

Slow query that needs optimization:

* May run infrequently
* But takes long time when it does
* Impact on user experience


=== High Page Faults

Query reads lots of data from disk:

* Not finding data in cache
* May need indexes
* May access cold data
* Instance may need more memory


read::Continue to next lesson[]


[.summary]
== Summary

You learned how to access and navigate query logs for your Aura instances.

You learned about the Summary tab for understanding query patterns and the Details tab for investigating specific executions.

Key metrics include duration, planning time, waiting time, and the ratio of page hits to page faults.

In the next lesson, you will learn how to filter query logs to find specific queries and issues.

