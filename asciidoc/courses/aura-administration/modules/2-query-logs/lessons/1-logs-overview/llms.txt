# Accessing Logs

Understanding log types, access methods, and log interface navigation for Neo4j Aura instances.

[View lesson](mdc:https://graphacademy.neo4j.com/courses/aura-administration/2-query-logs/1-logs-overview)

## Concepts

* **Query Logs** - Detailed records of every query executed against your database
* **Security Logs** - Records of authentication, authorization, and session events
* **Summary View** - Aggregated log data grouped by query or event type
* **Details View** - Individual log entries with specific timestamps and metadata
* **Log Retention** - Logs available for 30 days in Aura
* **GQL Status Code** - ISO GQL standard status codes indicating query success or failure type

## Log Types in Aura

### Query Logs

**Purpose:**
* Track every query executed within selected time period
* Identify slow or inefficient queries
* Monitor query patterns and frequency
* Optimize database operations
* Troubleshoot application issues

**Information Captured:**
* Query text (Cypher statement)
* Execution timestamp
* Duration (milliseconds)
* Success or failure status
* Executing user
* Application/driver name
* Error messages (if failed)
* Page hits and faults
* Planning time

**Use Cases:**
* Performance optimization - Find slow queries
* Debugging - Identify failing queries
* Monitoring - Track query frequency and patterns
* Capacity planning - Understand workload characteristics
* Audit - Review what queries were executed

### Security Logs

**Purpose:**
* Track authentication and authorization events
* Monitor database access patterns
* Identify security threats or anomalies
* Maintain compliance audit trails
* Debug permission issues

**Information Captured:**
* Event status (Info, Warning, Error)
* Event message
* Authenticated user (credentials used)
* Executing user (may differ if impersonation)
* Database accessed
* Driver used
* Timestamp
* Event count and time range

**Use Cases:**
* Security monitoring - Detect unauthorized access attempts
* Compliance - Maintain access audit trails
* Debugging - Troubleshoot authentication/authorization problems
* Capacity - Track connection patterns
* Incident response - Investigate security events

## Accessing Logs

### Step-by-Step Process

1. **Navigate to Operations Menu**
   * Locate your Aura instance in console
   * Expand the "Operations" menu in left navigation

2. **Select Logs**
   * Click "Logs" option in Operations menu
   * Defaults to Query Logs view

3. **Switch Between Log Types**
   * Click "Query" tab for query logs
   * Click "Security" tab for security logs

4. **Choose View Mode**
   * Select "Summary" tab for aggregated data
   * Select "Details" tab for individual entries

5. **Apply Filters**
   * Use filter controls to narrow results
   * Set time period for data range
   * Add specific filters based on log type

## Log Interface Navigation

### Summary View

**Purpose:**
* Quick overview of common patterns
* Identify frequently executed operations
* Spot problematic queries or events at a glance
* Understand aggregate statistics

**Query Logs Summary Columns:**
* **Status** - Success or failure
* **Count** - Number of executions
* **From** - First execution timestamp
* **To** - Last execution timestamp
* **Total time spent** - Cumulative execution time
* **Average time** - Mean execution duration
* **Min/Max time** - Performance range

**Security Logs Summary Columns:**
* **Status** - Event severity level
* **Message** - Event description
* **Count** - Occurrences
* **From** - First occurrence
* **To** - Last occurrence
* **Authenticated users** - Users involved
* **Executing user** - User who performed action

**When to Use Summary View:**
* Initial investigation of issues
* Identifying commonly executed queries
* Finding patterns in access attempts
* Quick health checks
* Prioritizing optimization efforts

### Details View

**Purpose:**
* Investigate specific query executions
* Debug individual failures
* Correlate events with application logs
* Understand timing of specific operations

**Query Logs Details Columns:**
* Individual execution timestamp
* Complete query text
* Execution duration
* User and application
* Status and error codes
* Performance metrics (per execution)

**Security Logs Details Columns:**
* Specific event timestamp
* Detailed message
* All user information
* Driver and connection details
* Database accessed

**When to Use Details View:**
* Debugging specific failures
* Understanding query timing patterns
* Correlating with application logs
* Investigating security incidents
* Tracking individual user actions

## Decision Framework: Which View to Use

### Use Summary View When:
* Starting investigation (high-level overview)
* Identifying most common queries
* Finding highest impact operations (total time)
* Spotting patterns across time periods
* Prioritizing optimization candidates

### Use Details View When:
* Debugging specific query failures
* Understanding performance variability
* Correlating with external events
* Investigating specific timestamps
* Tracking individual user activity

### Switch Between Views When:
1. **Summary → Details**: Found problematic pattern, need specifics
2. **Details → Summary**: Found specific issue, want to see if it's widespread
3. **Iterative Analysis**: Toggle to build complete picture

## Log Retention and Availability

### Retention Policy

**Aura Log Retention:**
* 30 days for all log types
* Rolling window (oldest data deleted)
* 24-hour maximum per query request

**Planning Around Retention:**
* Export critical logs before 30-day expiration
* Set up external monitoring for longer retention
* Document important findings before logs expire
* Schedule regular log reviews within retention window

### Data Request Limits

**Query Logs:**
* Maximum 24 hours per request
* Use time filters to retrieve specific ranges
* Multiple requests needed for longer periods

**Security Logs:**
* Maximum 24 hours per request
* Filter by time period for targeted analysis

**Best Practices:**
**DO:**
* Request specific time ranges for faster results
* Use filters to reduce data volume
* Export critical log data for longer retention
* Schedule regular log reviews (weekly minimum)

**DON'T:**
* Wait until issues arise to review logs
* Request maximum timeframes when unnecessary
* Skip regular log monitoring
* Assume logs persist beyond 30 days

## Log Download and Export

### When to Download Logs

* Compliance requires external retention
* Deep analysis with external tools
* Sharing with support or development teams
* Creating historical baseline records
* Regulatory audit preparation

### Export Process

1. **Apply desired filters** to narrow data
2. **Click download/export button** in log interface
3. **Choose format** (typically CSV or JSON)
4. **Save file** for external analysis or retention
5. **Document export** date and purpose

**Best Practices:**
**DO:**
* Filter before exporting to reduce file size
* Include timestamp in export filename
* Store exports securely with access controls
* Document what filters were applied
* Keep exports organized by time period

**DON'T:**
* Export unfiltered logs unnecessarily
* Share logs containing sensitive data unsecurely
* Skip metadata about export contents
* Delete exports before retention requirement met

## Integration with Troubleshooting Workflow

### Using Logs for Problem Diagnosis

**Step 1: Identify Symptom**
* Application slow?  → Query logs
* Users can't connect? → Security logs
* Errors reported? → Both logs, filtered by time

**Step 2: Set Time Window**
* When did problem start?
* Still occurring or intermittent?
* Correlate with deployment or change time

**Step 3: Apply Relevant Filters**
* Status = Failed (for errors)
* Minimum duration >1000ms (for slow queries)
* Specific user or application
* Error text search

**Step 4: Start with Summary**
* What's most common?
* What has highest impact?
* Any obvious patterns?

**Step 5: Drill into Details**
* Select specific query/event from summary
* Check individual occurrences
* Note timing patterns
* Correlate with external events

**Step 6: Gather Evidence**
* Export relevant log data
* Screenshot key findings
* Document observed patterns
* Prepare for deeper analysis

[Reference: Logs and Query Optimization Module](mdc:https://graphacademy.neo4j.com/courses/aura-administration/2-query-logs/)

