= Restore Operations
:type: lesson
:order: 5
:optional: true


[.discrete]
== Introduction

Despite your best efforts, sometimes you need to restore data from a backup.

In this lesson, you'll learn how to perform restore operations using snapshots and backup files, and you'll understand what restoring data really means for your instance.


== When to Restore from Backup

Common scenarios requiring restoration:

* **Accidental data deletion**: User error deleted critical data
* **Corrupted data**: Data integrity issues require reverting to a known good state
* **Failed migration**: A data migration or schema change caused problems
* **Security incident**: Malicious activity compromised data integrity
* **Testing rollback procedures**: Validating your disaster recovery plan


== Restore Options

You have two primary ways to restore data in Aura:


=== Option 1: Restore from Snapshot

To restore your instance from a snapshot:

. Navigate to your Aura instance card in the console
. Click the more menu icon (**…**) on the instance card
. Select **Inspect**
. Select the **Snapshots** tab
. Find the snapshot you want to restore from
. Click the **arrow icon** next to the more menu (**…**)
. Confirm the restore operation

[WARNING]
.Data will be overwritten
====
Restoring from a snapshot **overwrites all data** in your instance, replacing it with the data contained in the snapshot.

You will be asked to confirm this action. 

If you don't want to overwrite your current data, create a new instance from the snapshot instead (see previous lesson).
====


=== Option 2: Restore from Backup File

You can upload a previously exported backup file:

. Navigate to your Aura instance card in the console
. Open the instance details
. Select the **Restore from backup file** tab (next to the Snapshots tab)
. Drag and drop your backup file or browse for it:
  * **AuraDB instances**: `.backup` file (latest version) or `.dump` file (version 4.x)
  * **AuraDS instances**: `.tar` file

. Wait for the restore operation to complete

This option is useful when:

* Restoring from a downloaded/exported snapshot
* Migrating data from another Neo4j instance
* Restoring from an offline backup


[WARNING]
.Data will be overwritten
====
Uploading a backup file also **overwrites all data** currently in your instance.

If you don't want to overwrite your data, create a new instance instead.
====


== Database Upload Command

If you have a local Neo4j database installation, there's another option: the `neo4j-admin database upload` command. This lets you upload database contents directly to your Aura instance.

The command works for databases of any size, as long as they fit within your Aura instance capacity.

[source,bash]
----
neo4j-admin database upload \
  --from-path=/path/to/database \
  --to-uri=neo4j+s://xxxxx.databases.neo4j.io \
  --to-user=neo4j \
  --to-password=your-password
----

[IMPORTANT]
.Network Access Requirements
====
The `database upload` command requires that your Aura instance is accessible from the machine running the command.

If you have network access configurations that prevent public traffic, you must temporarily enable public traffic for the region where your instance is hosted.

See the Aura documentation for details on network access configuration.
====


== Post-Restore Verification

After you restore, you need to verify everything worked correctly:

* **Data integrity**: Run queries to confirm your expected data is present
* **Application connectivity**: Make sure your applications can connect
* **Index status**: Check that all indexes are available
* **Recent changes**: Document any data loss from the restore point
* **Application behavior**: Test your critical application workflows


== Best Practices for Restore Operations

* **Create a test instance first** to verify the snapshot before restoring to production
* **Take an on-demand snapshot** before restoring (gives you a way back)
* **Communicate with stakeholders** before restoring production data
* **Understand data loss implications** - you will lose all changes made after the snapshot time
* **Test restore procedures** regularly in non-production environments
* **Document restore procedures** step-by-step for your organization
* **Time restore operations** during maintenance windows when possible


read::Continue to next lesson[]


[.summary]
== Summary

You now know how to perform restore operations for your Aura instances.

You've learned about restoring from snapshots, uploading backup files, using the `neo4j-admin database upload` command, and best practices for performing restores safely.

In the next challenge, you'll apply this knowledge to decide on the best restore approach for a production incident.

