= テスト
:type: quiz
:order: 1
:updated-at: 2022-04-25 T 21:00:00 Z

[.video]
video::sTFphw55FIY[youtube,width=560,height=315]

[.transcript]
== なぜテストが必要なのか。

ここまでは、紙やホワイトボード、あるいは https://arrows.app/[Arrows app^] のようなツールでデータモデルを設計することを見てきました。
ユースケースを使用して、ノードのラベル、リレーションシップのタイプと方向、ノードとリレーションシップのプロパティを含むデータモデルを設計します。

また、データモデルを実装するためのグラフには、少量のテストデータセットを配置しました。
グラフがすべてのユースケースを満たすことができることを確認するために、グラフに対してユースケースをテストする必要があります。

=== データモデルのテスト

以下は、グラフに表示されるインスタンスモデルです。

image::images/after-challenge2-instance-model.png[Current instance model,width=400,align=center]

次の課題では、Cypherクエリを実行して、グラフに対する各ユースケースをテストしていきます。

テストは、インスタンスモデルに対してCypherのコードを実行し、グラフとクエリがユースケースをサポートしていることを確認することです。

例えば、最初のユースケースで：

**ユースケース1：映画に出演したのはだれか？**

映画のタイトルを指定したこのクエリを実行します。

[source,cypher, role=noplay nocopy]
----
MATCH (p:Person)-[:ACTED_IN]-(m:Movie)
WHERE m.title = 'Sleepless in Seattle'
RETURN p.name AS Actor
----

ユースケースの説明では、期待される結果がどうあるべきかを指定することもできます。


=== 追加のテストの必要性

ユースケースを進めていくうちに、グラフに追加したいデータを思いつき、テストを完成させることができるかもしれません。

ユースケースをテストするために使用するCypherコードは、正確であるかどうか慎重にレビューする必要があります。
さらに、グラフのリファクタリング（次のモジュール）が行われた場合、これらのユースケースのCypherコードは、パフォーマンスを向上させるために修正する必要があるかもしれないことを理解しておく必要があります。

ユースケースがデータモデルで回答できることを確認するための基本的なテストは、テストの最初のステップです。

グラフのテストで本当に重要なのは、「**スケーラビリティ（拡張性）**」です。
グラフが何百万ものノードやリレーションシップを持つ場合、これらのクエリはどのように実行されるのでしょうか。
Cypherの開発者と協力して、グラフが大きくなったときのクエリのパフォーマンスをテストする必要があります。


== 理解度チェック


include::questions/1-graph-numbers.adoc[leveloffset=+1]

[.summary]
== まとめ

このレッスンでは、ユースケースに対してデータモデルをテストする必要があることを学びました。
次の課題では、作成したインスタンスモデルに対して、各ユースケースをテストします。