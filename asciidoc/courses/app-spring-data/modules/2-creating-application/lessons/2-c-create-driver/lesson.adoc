= Spring Data Neo4j Building Blocks
:type: lesson

When you get to the next lesson where you connect the application to Neo4j, you might notice that you don't create a driver object and manage sessions and transactions yourself. That's where this lesson comes in - to show you why that's unnecessary here and how to customize those components in later projects, if desired.

== Building blocks of Spring Data Neo4j

SDN assembles a few building blocks that allow users to choose their level of customization/abstraction. All of the pieces are shown in the image below.

image::{repository-raw}/{path}/images/sdn-buildingblocks.png[Spring Data Neo4j building blocks,width=600,align=center]

Starting on the left side of the diagram, four pieces stack vertically. At the bottom is the plain Java driver. Users can fully customize and manage the driver lifecycle, digging into the nuts and bolts of the connection, query execution, and transactions. However, note that these transactions are not tied to Spring transactions (those are separate). Sliding right across the line from that component, the `spring-boot-starter` library includes only this piece.

Moving back to the left, there is a box that represents the Spring Data Neo4j library and encompasses the next three components. The lowest of the three SDN components is the Neo4j Client. The client gives you ties to Spring transactions, but does not map to any domain model, so results will be generic types. Above the client is the Neo4j Template. The template does see your domain, but allows you to query ad-hoc objects. Finally, at the top is the Spring Data Repositories. The repositories are the highest level of abstraction, allowing you to work with your domain model and use Spring Data's repository abstractions.

You can use each of the custom components in SDN separately, but for the purpose of this course, we will utilize them together. Sliding right across the line, all the SDN components are included in the `spring-boot-starter-data-neo4j` library, which is the dependency we included in our project in the last lesson.

[TIP]
.Check the Dependency
====
You can check this by opening the `pom.xml` file in your project and looking for the `spring-boot-starter-data-neo4j` dependency.
====

== Driver Lifecycle and Transaction Management

Core Spring Framework provides a consistent approach to transactions and transaction management. While it is possible to customize this for certain scenarios, many use cases can operate under Spring's default configuration.

Since Spring Data Neo4j taps into the Spring transactions, your project already includes automatic management of the driver object and transactions. It is abstracted away, so that you can focus on your domain model and queries.

This is why we do not need to create the boilerplate code for defining, authenticating, opening, and closing a driver object. Spring Data Neo4j handles that for us.

== Check Your Understanding

include::questions/1-building-blocks.adoc[leveloffset=+1]

[.summary]
== Lesson Summary

In this lesson, you learned how Spring Data Neo4j combines a few building blocks to provide management of the driver connection and transactions.

In the next lesson, you will learn how to apply this by connecting your application to Neo4j and testing it.

== Further reading

* https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#building-blocks[SDN Building Blocks]