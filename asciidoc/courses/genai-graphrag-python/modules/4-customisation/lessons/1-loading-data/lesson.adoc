= Loading documents
:type: lesson
:order: 1
:optional: true
:branch: main

You can modify how the `SimpleKGBuilder` loads documents to suit your own use case.

You may want to:

- Load documents from a custom source, such as a database or an API.
- Pre-process documents before they are loaded, such as removing unwanted text or formatting.
- Implement custom parsing logic for specific document types.

In this lesson you will explore examples of how to create custom document loaders.

== Custom PDF Loader

You can extend the existing PDF loader to fit your own use case, such as pre-processing the text before it is loaded into the graph.

The PDF documents you have been using in this course contain `:attributes:` that are not relevant to the knowledge graphs and may introduce noise.

[source,text]
.Unwanted attributes
----
= What is Generative AI
:order: 1
:type: lesson
:slides: true

...
----

You can strip the attributes from the text before it is loaded into the graph by extending the link:https://neo4j.com/docs/neo4j-graphrag-python/current/api.html#pdfloader[`PdfLoader`^] class to create a `CustomPDFLoader`:

[source,python]
----
include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_custom_pdf.py[tag=import_loader]

include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_custom_pdf.py[tag=loader]
----

The `CustomPDFLoader` overrides the `run` method to pre-process the text and uses regex to remove unwanted attributes.

You can run the custom loader directly to verify that it is working:

[source,python]
----
include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_custom_pdf.py[tag=run_loader]
----

The custom loader can then be used in the `SimpleKGPipeline` to load and process PDF documents by setting the `pdf_loader` parameter:

[source,python]
----
include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_custom_pdf.py[tag=kg_builder]
----

[%collapsible]
.Reveal the complete code
====
This example code shows how to create and use the `CustomPDFLoader` in a `SimpleKGPipeline`:

[source, python]
----
include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_custom_pdf.py[tag=**,!run_loader]
----
====

== Custom Data Loader

The `SimpleKGPipeline` can load documents from different sources by implementing a custom data loader.

You can extend the link:https://neo4j.com/docs/neo4j-graphrag-python/current/api.html#dataloader[`DataLoader`^] a class to load any text data from any source.

You can load data from a text file by implementing a `TextLoader` class:

[source,python]
----
include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_text_file.py[tag=import_loader]

include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_text_file.py[tag=loader]
----

The `SimpleKGPipeline` expects a `PdfDocument` object to be returned that includes the raw `text` and a `DocumentInfo` object containing a `path` and optional `metadata`.

[TIP]
.metadata
The metadata can include any information you want to associate with the document, such as author, date, or source.

You can run the text loader directly to verify that it is working:

[source,python]
----
include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_text_file.py[tag=run_loader]
----

[%collapsible]
.Reveal the complete code
====
This example code shows how to create and use the `TextLoader` in a `SimpleKGPipeline`:

[source, python]
----
include::{repository-raw}/{branch}/genai-graphrag-python/examples/data_loader_text_file.py[tag=**,!run_loader]
----
====

When you're ready you can continue.

read::Continue[]

[.summary]
== Lesson Summary

In this lesson, you learned how to create custom data loaders.

In the next lesson, you will learn how to integrate custom chunking and text splitting strategies into the knowledge graph pipeline.
