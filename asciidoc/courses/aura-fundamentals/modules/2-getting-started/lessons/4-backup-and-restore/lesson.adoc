= Backup and restore
:type: lesson
:order: 4
:slides: true

[.slide.discrete]
== Backing up and restoring data

In this lesson, you will learn how to:

* Understand scheduled and on-demand snapshots
* Export, restore, and create instances from snapshots

[.slide]
== Understanding Aura snapshots

Snapshots are Aura's backup mechanism: point-in-time copies you can use to restore your instance after accidental deletes or failed changes. Some run on a schedule (depending on your tier); others you create yourself. Scheduled snapshots happen automatically—no action needed. On-demand snapshots are for when you want a safety point before something risky: a big import, a schema change, or other operations you might want to roll back.

image::images/03_snapshot.jpg[snapshot,width=450,align=center]

[.slide]
== Snapshot frequency and retention by tier

[cols="1,2,2"]
|===
| Tier | Scheduled | Retention

| **Free**
| On-demand only
| Latest snapshot only

| **Professional**
| Daily
| 7 days

| **Business Critical**
| Hourly
| 30 days

| **Virtual Dedicated Cloud**
| Hourly (days 1–7), daily (days 8–60)
| 60 days
|===

[.slide.col-2]
== When to use each snapshot type

[.col]
====
Use the decision tree to choose the right approach: on-demand snapshot, scheduled snapshots, or export for long-term storage.
====

[.col]
====
image::images/backup-decision.png[Backup decision tree showing when to use different snapshot types]
====

[.slide]
== Working with snapshots

For any snapshot you can:

* **Export** — Download to your machine for long-term storage (beyond Aura retention).
* **Create instance from snapshot** — Spin up a new instance with that data (e.g. for dev or staging).
* **Restore** — Revert the *current* instance to that point in time (overwrites existing data).

image::images/03_snapshot_actions.jpg[Snapshot actions menu,width=300,align=center]

[.slide]
== Export snapshots

Exporting downloads a snapshot to your machine so you can keep it beyond Aura's retention, meet compliance, or keep a safety copy before big changes.

* Open the **Snapshots** tab for your instance.
* Find the snapshot you want, click the menu (…​) next to it, and choose **Export**.
* Save the file somewhere safe (download time depends on size and your connection).
* Neo4j 5 exports use `.backup`; 4.x uses `.dump`. Name files clearly (e.g. instance name and date) so you can find them later.

[.slide]
== Create a new instance from a snapshot

You get a separate database with that snapshot's data—handy for a dev or staging copy of production, or for trying changes without touching the live instance.

* In the **Snapshots** tab, open the menu (…​) for the snapshot and select **Create instance from snapshot**.
* Choose the tier and size you want (they can differ from the original), then complete the wizard.
* The new instance is billed separately; creation time depends on data size and current load.

[.slide]
== Restore a snapshot

Restoring rolls your *current* instance back to the snapshot's point in time. Use it when you need to undo bad changes or recover from a mistake.

[WARNING]
.Overwrites data
====
Restoring replaces all data in the instance with the snapshot. If you might need the current state later, export a snapshot of it first.
====

* In the **Snapshots** tab, find the snapshot you want and click the restore icon (↩).
* Type **RESTORE** to confirm, then click **Restore**.
* The instance is unavailable for a short time while the restore runs.
* You can't preview snapshot contents before restoring; to check the data first, create an instance from that snapshot and inspect it there.

[.slide]
== Restore from a local backup file

Use this when you have a backup or dump on your machine (e.g. from another Neo4j instance or an earlier export)—for example when migrating to Aura or bringing back an exported snapshot. The restore replaces everything currently in the instance.

image::images/03_restore_from_backup.jpg[Restore from backup file tab,width=450,align=center]

[.slide]
== Restoring from a local file

* Open the **Restore from backup file** tab for your instance.
* Select your `.backup`, `.dump`, or `.tar` file (console accepts up to 4GB).
* Confirm the restore and wait for it to finish; the instance is unavailable until it’s done.
* The instance must have enough capacity for the data; **AuraDB Free** has extra limits.
* For files larger than 4GB, use the Neo4j Admin CLI instead:

[source,bash]
----
neo4j-admin database upload <database-name> \
  --from-path=<path-to-backup> \
  --to-uri=<aura-instance-uri> \
  --to-user=<username> \
  --to-password=<password>
----

[.slide]
== Planning your backup strategy

* Export important snapshots to your own storage on a schedule that fits your retention or compliance needs.
* From time to time, run through a restore (or create an instance from a snapshot) so you know the process works when you need it.
* Check your organization’s requirements for how long to keep backups and where they must be stored.
* Aura stores snapshots encrypted at rest and in transit; once you download an export, keeping it secure is your responsibility.

For more detail, see the link:https://neo4j.com/docs/aura/managing-instances/backup-restore-export/[Neo4j Aura documentation on backup, export, and restore^].

[.quiz]
== Check your understanding

include::questions/1-snapshot-purpose.adoc[leveloffset=+1]

include::questions/2-snapshot-actions.adoc[leveloffset=+1]

[.summary]
== Summary

In this lesson, you learned how Aura backup and restore works:

* **Snapshot types and tiers** — Scheduled and on-demand; frequency and retention by tier.
* **Export** — Download snapshots (`.backup` or `.dump`) for long-term storage.
* **Create instance from snapshot** — New instance with snapshot data for dev, staging, or testing.
* **Restore snapshot** — Revert the current instance to a snapshot (overwrites data).
* **Restore from local file** — Upload a local backup (up to 4GB in console; use CLI for larger files).

In the next lesson, you will learn how to connect to your instance and use the tools for querying and exploring your data.
