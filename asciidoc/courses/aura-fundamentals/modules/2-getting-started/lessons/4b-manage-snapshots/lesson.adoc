= Creating and managing snapshots
:type: lesson
:order: 5
:slides: true

[.slide.discrete]
== Creating and managing snapshots

You have learned about Aura's snapshot system and when to use scheduled and on-demand snapshots.

**Your mission in this lesson:** Learn how to create on-demand snapshots, export them for long-term storage, and create new instances from snapshots. These skills help you protect your recommendation engine's data and create test environments.

In this lesson, you will learn how to:

* Create on-demand snapshots
* Export snapshots for long-term storage
* Create new instances from snapshots

[.slide]
== Working with snapshots

There are three key actions available for any snapshot:

* **Export** - Download the snapshot to your local machine for long-term storage.
* **Create a new instance from snapshot** - Spin up a new Aura instance using the snapshot data.
* **Restore** - Revert your current instance to the snapshot's point in time.

Each action serves a different purpose:
* Export preserves snapshots beyond Aura's retention period
* Create instance lets you test changes on a copy of your data
* Restore reverts your instance to a previous state

image::../4-backup-and-restore/images/03_snapshot_actions.jpg[snapshotactions,width=300,align=center]

[.slide]
== Creating on-demand snapshots

**When to create:** Create an on-demand snapshot before:
* Major application updates or schema changes
* Significant data imports (like loading your movie dataset)
* Risky operations (bulk deletes, migrations)
* Testing new recommendation algorithms

**How to do it:**

1. Navigate to the **Snapshots** tab within your Aura instance
2. Click **Create snapshot** button
3. Wait for the snapshot to complete (usually takes a few seconds to a minute)

**How it works in the background:** Aura:
1. Creates a point-in-time copy of your database
2. Stores it in encrypted cloud storage
3. Makes it available for export, restore, or instance creation

[.slide]
=== Export snapshots

**Export** downloads the snapshot to your local machine. Exporting is essential for long-term archival beyond Aura's retention period, especially when you need to meet compliance requirements that mandate offline backups.

It's also essential for creating backups before major changes or migrations, and for sharing data securely with development teams.

Export snapshots regularly to preserve your dataset beyond Aura's retention period. This ensures you can recover your data even if you need to recreate your instance.

[.slide]
=== How to export a snapshot

To export a snapshot:

1. Navigate to the **Snapshots** tab within your Aura instance
2. Locate the snapshot you want to export
3. Click the more menu (…​) next to the snapshot
4. Select **Export** to download the snapshot

The download time depends on your database size and network speed.

**Best practice:** Export snapshots regularly, especially after importing new movie data or making significant changes to your recommendation model.

[.slide]
=== Export file formats

Exported snapshots use different file formats depending on your Neo4j version:

* **Neo4j Version 5**: `.backup` format (changed October 1, 2024)
* **Neo4j Version 4.x**: `.dump` format

Store your exported snapshots in a secure location with a clear naming convention that includes the instance name and export date.

**Example naming:** `movie-recommendation-engine-2024-01-15.backup`

[.slide]
=== Create new instances from snapshots

**Create instance from snapshot** spins up a fresh instance with the snapshot's data. Use this option to set up development environments that mirror production, allowing you to test changes on a copy of real data.

Creating instances from snapshots also works well for staging environments for application testing, or as part of disaster recovery scenarios.

Create a test instance from a snapshot to:
* Test new recommendation algorithms without affecting production
* Experiment with different data models
* Validate changes before applying them to production

[.slide]
=== How to create an instance from a snapshot

To create a new instance from a snapshot:

1. In the **Snapshots** tab, find the snapshot you want to use
2. Click the more menu (…​) next to the snapshot
3. Select **Create instance from snapshot**
4. Choose your desired tier and size (can be different from the original)
5. Follow the prompts to configure the new instance

[NOTE]
.Remember
====
The new instance will be billed separately according to its selected tier and size. The time to create the instance varies based on database size and system load.
====

**Example use case:** Create a Free tier test instance from your production snapshot to test recommendation query changes without affecting your main instance.

[.summary]
== Summary

In this lesson, you learned how to create and manage snapshots for your recommendation engine. You:

* **Created on-demand snapshots**: Learned when and how to create manual snapshots before risky operations
* **Exported snapshots**: Downloaded snapshots for long-term storage beyond Aura's retention period
* **Created instances from snapshots**: Spun up new instances with snapshot data for testing

These snapshot management skills help you:
* Protect your data
* Create test environments with real data
* Meet compliance requirements for data retention

[.quiz]
== Check your understanding

include::questions/1-export-purpose.adoc[leveloffset=+1]

[.summary]
== Summary

In this lesson, you learned how to create and manage snapshots for your recommendation engine. You:

* **Created on-demand snapshots**: Learned when and how to create manual snapshots before risky operations
* **Exported snapshots**: Downloaded snapshots for long-term storage beyond Aura's retention period
* **Created instances from snapshots**: Spun up new instances with snapshot data for testing

These snapshot management skills help you:
* Protect your data
* Create test environments with real data
* Meet compliance requirements for data retention

For more information on managing snapshots, see the link:https://neo4j.com/docs/aura/managing-instances/backup-restore-export/[Neo4j Aura documentation on backup, export, and restore^].

In the next lesson, you'll learn how to restore your instance from snapshots and local backup files.

