= Create your graph data model
:type: lesson
:order: 2
:slides: true

[.slide.discrete]
== Creating your graph data model

In the previous lesson, you prepared your movie dataset and added it to the Data Importer.

**Your mission in this lesson:** Create a graph data model that maps your CSV data to nodes and relationships. The model you create determines how effectively your recommendation engine finds connections between movies and actors.

In this lesson, you will learn how to:

* Create a data model in the Data Importer
* Define Movie and Person nodes with their properties
* Define ACTED_IN relationships connecting actors to movies
* Review and confirm your model before importing

[.slide]
== Step 4: Create your data model

**Why this step matters:** The data model defines how your CSV data becomes a graph. For your recommendation engine, you need:
* **Movie nodes** - Each movie becomes a node to query
* **Person nodes** - Each actor becomes a node to traverse from
* **ACTED_IN relationships** - These connections enable recommendation queries like "Find movies with the same actors"

**How to do it:** Click **Create model manually** to start building your graph structure.

image::../1-import/images/01_data_importer_model_blank.jpg[importer_bank,width=600,align=center]

[.slide]
== Understanding nodes and relationships in context

**How this relates to Neo4j Fundamentals:**

If you've taken the link:/courses/neo4j-fundamentals/[Neo4j Fundamentals course^], you learned that graphs consist of:
* **Nodes** (vertices) - Entities in your domain (like movies and actors)
* **Relationships** (edges) - Connections between entities (like ACTED_IN)
* **Properties** - Attributes stored on nodes and relationships (like `title` on Movie nodes, `characters` on ACTED_IN relationships)
* **Labels** - Categories for nodes (like `Movie` and `Person`)

In this import, you're creating these graph elements from your CSV data:
* Each unique movie becomes a **Movie node** with a `title` property
* Each unique actor becomes a **Person node** with a `name` property
* Each actor-movie pair becomes an **ACTED_IN relationship** with a `characters` property

**How this relates to Graph Data Modeling Fundamentals:**

If you've taken the link:/courses/modeling-fundamentals/[Graph Data Modeling Fundamentals course^], you learned about:
* **Instance models** - The actual nodes and relationships in your graph (what you're creating now)
* **Domain models** - The conceptual design of your graph (Movie and Person connected by ACTED_IN)

The Data Importer helps you create an instance model from your CSV. You're deciding:
* Which entities become nodes (Movie, Person)
* Which connections become relationships (ACTED_IN)
* Which CSV columns become properties (`title`, `name`, `characters`)

This modeling step is critical—a well-designed model makes recommendation queries fast and intuitive.

**How this relates to Importing Data Fundamentals:**

If you've taken the link:/courses/importing-fundamentals/[Importing Data Fundamentals course^], you learned about:
* **Import methods** - Different ways to load data (Data Importer, LOAD CSV, neo4j-admin import)
* **Data transformation** - Converting tabular data (CSV) into graph structures (nodes and relationships)
* **Unique constraints** - Ensuring nodes aren't duplicated (using `movieId` and `personId` as unique identifiers)

In this lesson, you're using the Data Importer (a visual, no-code tool) to transform your CSV into a graph. The Data Importer automatically handles:
* Creating unique nodes (using `movieId` and `personId` as keys)
* Mapping CSV columns to node and relationship properties
* Generating efficient Cypher statements for the import

**Key takeaway:** Nodes and relationships are the building blocks you learned about in Neo4j Fundamentals. The modeling principles from Modeling Fundamentals guide how you structure them. The import techniques from Importing Fundamentals show you how to create them from your data. This lesson combines all three—you're applying fundamentals to build your recommendation engine.

[.slide]
== Step 5: Define Movie nodes

**Why Movie nodes:** Movies are central to your recommendation engine. Each Movie node has properties (title, movieId) to use in queries like "Find movies similar to The Matrix."

**How to do it:**

1. Click the **Add node label** button (or the + icon)
2. In the details panel on the right, set the label to **Movie**
3. Click **Map from table** to connect CSV columns to node properties
4. Map **movieId** → This becomes the unique identifier for each Movie node
5. Map **title** → This becomes a property to search and display

**How it works in the background:** When you map `movieId` and `title`, the Data Importer will create Cypher statements like:
```
CREATE (m:Movie {movieId: '123', title: 'The Matrix'})
```

This creates Movie nodes that your recommendation queries can traverse.

**What this video shows:** How to add a node label (Movie) to your data model in the Data Importer.

video::https://cdn.graphacademy.neo4j.com/courses/aura-fundamentals/add-node-label.mp4["Add Node Label",role="cdn",  width=100%]

**What happened:** The video demonstrated creating a Movie node label. After adding the label, you can edit the model structure to refine how your CSV data maps to graph elements.

**What this video shows:** How to edit your data model structure after creating nodes, including adjusting property mappings.

video::https://cdn.graphacademy.neo4j.com/courses/aura-fundamentals/edit-data-model.mp4["Edit Data Model",role="cdn",  width=100%]

[.slide]
== Step 6: Define Person nodes

**Why Person nodes:** Actors are the connections between movies in your recommendation engine. When you query "Find movies with Tom Hanks," you're traversing from a Person node through ACTED_IN relationships to Movie nodes.

**How to do it:**

1. Click the **Add node label** button again to create a second node type
2. Set the label to **Person**
3. Click **Map from table**
4. Map **personId** → Unique identifier for each Person node
5. Map **name** → Property to search (e.g., "Tom Hanks")

**Example for recommendations:** Once imported, you'll be able to query:
```
MATCH (p:Person {name: 'Tom Hanks'})-[:ACTED_IN]->(m:Movie)
RETURN m.title
```

This finds all movies Tom Hanks acted in—the foundation of actor-based recommendations.

**What this video shows:** How to add a Person node label, similar to the Movie node you created earlier.

video::https://cdn.graphacademy.neo4j.com/courses/aura-fundamentals/add-node-label.mp4["Add Node Label",role="cdn", width=100%]

image::../1-import/images/01_data_importer_model_person.jpg[importer_person,width=600,align=center]

**Optional:** Edit property types by clicking the pencil icon next to each property. For example, you might want to ensure `personId` is stored as an integer for better query performance.

**What this video shows:** How to edit field properties (like data types) for your Person node to optimize query performance.

video::https://cdn.graphacademy.neo4j.com/courses/aura-fundamentals/edit-fields.mp4["Edit Fields",role="cdn",  width=100%]

[.slide]
== Step 7: Define ACTED_IN relationships

**Why relationships matter:** Relationships are the core of your recommendation engine. The ACTED_IN relationship connects Person nodes to Movie nodes, enabling queries like:
* "Find all movies with the same actors" (traverse from Movie through ACTED_IN to Person, then back to other Movies)
* "Find actors who worked together" (find two Person nodes connected to the same Movie)

**How to do it:**

1. Hover over the edge of the **Person** node—you'll see a plus-sign (+)
2. Click and drag from Person to **Movie** node
3. Name the relationship type **ACTED_IN**
4. The Data Importer automatically maps `personId` and `movieId` to connect the right nodes
5. Click **Map from table** and select **characters**—this stores the character name as a property on the relationship

**How it works in the background:** The Data Importer creates Cypher statements like:
```
MATCH (p:Person {personId: '123'}), (m:Movie {movieId: '456'})
CREATE (p)-[:ACTED_IN {characters: ['Neo']}]->(m)
```

This creates the connections your recommendation engine needs to traverse.

image::../1-import/images/01_data_importer_model_actedin.jpg[importer_actedin,width=600,align=center]

**Verification:** The green checkmark indicates that the relationship mapping is correct. Your model now shows Person nodes connected to Movie nodes via ACTED_IN relationships—exactly what you need for recommendation queries.

[.slide]
== Step 8: Review and confirm your model

**Why this matters:** Before importing, verify that your model correctly maps CSV data to graph structure. Incorrect mappings mean your recommendation queries won't work.

**How to do it:**

1. Review the model diagram—you should see Person and Movie nodes connected by ACTED_IN relationships
2. Click on each node to verify property mappings (movieId, title for Movie; personId, name for Person)
3. Verify the ACTED_IN relationship maps personId and movieId correctly
4. Confirm primary keys: The Data Importer uses `movieId` and `personId` as unique identifiers to avoid creating duplicate nodes

**How it works in the background:** The Data Importer analyzes your CSV to ensure:
* No duplicate nodes (uses movieId/personId as unique keys)
* All relationships can be created (both Person and Movie nodes exist)
* Data types are correct (strings, numbers, etc.)

video::https://cdn.graphacademy.neo4j.com/courses/aura-fundamentals/load-data-params.mp4["Load Data Parameters",role="cdn",  width=100%]

[.summary]
== Summary

In this lesson, you created your graph data model for the recommendation engine. You:

* **Created your data model**: Started building the graph structure in the Data Importer
* **Defined Movie nodes**: Mapped movieId and title properties to Movie nodes
* **Defined Person nodes**: Mapped personId and name properties to Person nodes
* **Defined ACTED_IN relationships**: Connected Person and Movie nodes with relationship properties
* **Reviewed your model**: Verified all mappings are correct before importing

**Why this matters for recommendations:** The graph structure you created (Person -[:ACTED_IN]-> Movie) enables recommendation queries. This model allows you to:
* Find movies with the same actors
* Discover actors who worked together
* Identify similar movies based on shared cast

**How it works:** The Data Importer transforms your tabular CSV data into a graph by creating nodes (entities) and relationships (connections). This graph structure is what makes recommendation queries fast and intuitive.

[.quiz]
== Check your understanding

include::questions/1-model-structure.adoc[leveloffset=+1]

[.summary]
== Summary

In this lesson, you created your graph data model for the recommendation engine. You:

* **Created your data model**: Started building the graph structure in the Data Importer
* **Defined Movie nodes**: Mapped movieId and title properties to Movie nodes
* **Defined Person nodes**: Mapped personId and name properties to Person nodes
* **Defined ACTED_IN relationships**: Connected Person and Movie nodes with relationship properties
* **Reviewed your model**: Verified all mappings are correct before importing

**Why this matters for recommendations:** The graph structure you created (Person -[:ACTED_IN]-> Movie) enables recommendation queries. This model allows you to:
* Find movies with the same actors
* Discover actors who worked together
* Identify similar movies based on shared cast

**How it works:** The Data Importer transforms your tabular CSV data into a graph by creating nodes (entities) and relationships (connections). This graph structure is what makes recommendation queries fast and intuitive.

**What's next:** In the next lesson, you'll run the import and verify that your movie data was loaded correctly into your Aura instance.

For more information on data modeling, see the link:https://neo4j.com/docs/aura/import/introduction/[Neo4j Aura Import documentation^].

In the next lesson, you'll run the import and verify your data was loaded correctly.

