= Challenge: Clean your catalog
:type: challenge
:order: 10
:sandbox: true

[.transcript]
== Challenge: Managing your catalog

Throughout this module, you've created many graph projections for learning purposes. Now it's time to practice good memory management by cleaning up your catalog.

Before you begin, let's recap what you've learned about graph catalog operations:


== Quick Recap

You've learned three essential operations for managing graphs in the catalog.

**Listing graphs** shows you all projections currently in memory:

[source,cypher]
----
CALL gds.graph.list()
YIELD graphName, nodeCount, relationshipCount, memoryUsage
RETURN graphName, nodeCount, relationshipCount, memoryUsage
----

**Checking existence** verifies whether a specific graph is available:

[source,cypher]
----
CALL gds.graph.exists('graph-name')
YIELD graphName, exists
RETURN graphName, exists
----

**Dropping graphs** removes them from memory and frees up resources:

[source,cypher]
----
CALL gds.graph.drop('graph-name')
YIELD graphName, memoryUsage
RETURN graphName, memoryUsage
----

Now let's put these operations to work.


== Your Challenge

Complete the following tasks to clean up your graph catalog:

**Task 1:** List all graphs currently in your catalog and note how much memory they're using.

**Task 2:** Drop one graph from your catalog to practice the basic operation.

**Task 3:** Now drop all remaining graphs at once using a single query. You'll need to combine list and drop operations.

**Task 4:** Verify that your catalog is empty by listing all graphs again.


== Hints

For Task 1, you'll want to see the `memoryUsage` field to understand how much space each graph is consuming.

For Task 2, choose any graph and drop it using `gds.graph.drop()`.

For Task 3, here's a template to help you drop all remaining graphs at once. Think about how you can use the output from one operation as input to another:

[source,cypher]
----
CALL gds.graph.?????()
YIELD ?????
CALL gds.graph.?????(?????)
YIELD graphName AS droppedGraph
RETURN droppedGraph
----

For Task 4, when you list graphs after dropping them all, you should see an empty result.


== Solution

[%collapsible]
====
**Task 1: List all graphs**

[source,cypher]
----
CALL gds.graph.list()
YIELD graphName, nodeCount, relationshipCount, memoryUsage
RETURN graphName, nodeCount, relationshipCount, memoryUsage
ORDER BY graphName ASC
----

This shows you all graphs in your catalog with their memory usage.

**Task 2: Drop one graph**

[source,cypher]
----
CALL gds.graph.drop('actor-collaboration')
YIELD graphName, memoryUsage
RETURN graphName, memoryUsage
----

Choose any graph name from your catalog. The procedure returns information about the dropped graph.

**Task 3: Drop all remaining graphs at once**

[source,cypher]
----
CALL gds.graph.list()
YIELD graphName
CALL gds.graph.drop(graphName)
YIELD graphName AS droppedGraph
RETURN droppedGraph
----

This query lists all graphs and drops each one in a single operation. The key insight is that you can use the `graphName` output from `list()` as the input to `drop()`.

**Task 4: Verify catalog is empty**

[source,cypher]
----
CALL gds.graph.list()
YIELD graphName
RETURN graphName
----

This should return no results, confirming all graphs have been removed.

**Key takeaway:** Chaining operations like this is a powerful pattern in Cypher. You can use the output of one procedure as input to another, enabling complex workflows in a single query.
====


[.quiz]
== Check your understanding

include::questions/1-chaining-operations.adoc[leveloffset=+1]


[.summary]
== Summary

You've successfully cleaned up your graph catalog by listing all graphs, dropping them to free memory, and verifying they're gone. These operations are essential for efficient memory management in production workflows.

You've now completed all the fundamental concepts: projections, graph types, and catalog management. In the next module, you'll dive deep into GDS algorithmsâ€”learning how to read documentation, configure settings, and model projections for specific analytical questions.

