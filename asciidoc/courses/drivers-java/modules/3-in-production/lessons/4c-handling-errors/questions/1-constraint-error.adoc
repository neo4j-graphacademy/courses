[.question.select-in-source]
= Handle the constraint error

// TODO - update question

Select the correct function to handle the constraint error.

[source,Java,role=nocopy noplay]
----
// from neo4j.exceptions import ConstraintError

// def add_user(tx, name, email):
//     try:
//         result = tx.run(
//             "CREATE (u:User {name: $name, email: $email}) RETURN u",
//             name=name, email=email
//         )
//         return {"success": True, "message": "User created successfully"}
//     #select:except ConstraintError as e:
//         return {"success": False, "message": f"Email {email} already exists"}
----

- [x] except ConstraintError as e
- [ ] except UserExistsError as e
- [ ] except ProgrammingError as e
- [ ] except PEBKACError as e

[TIP,role=hint]
.Hint
====
The Cypher statement above creates a __constraint__ on the `email` property for the `User` label.
====

[TIP,role=solution]
.Solution
====
The correct answer is `except ConstraintError as e`.

The `except ConstraintError as e` block will catch the constraint error and return a message to the user.

[source,Java]
----
// from neo4j.exceptions import ConstraintError
----

The other options are incorrect because:

- `run()` is deprecated and should not be used
- `execute_write()` is for write transactions only
- `run_async()` is not a valid method for the session object
====
