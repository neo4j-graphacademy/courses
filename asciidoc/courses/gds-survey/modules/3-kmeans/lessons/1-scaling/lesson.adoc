= Feature normalization
:sandbox: true
:type: quiz

[.transcript]
KMeans is an unsupervised learning algorithm that aims to group a given dataset into K number of communities, where K is a pre-defined parameter.
The algorithm works by iteratively assigning each data point to its nearest centroid (center of a cluster), and then computing the new centroid of each cluster based on the mean of all the data points in that cluster.
This process is repeated until the centroids no longer change significantly or a maximum number of iterations is reached.
To measure the distance between a data point and a centroid, KMeans uses the Euclidean distance.

Euclidean distance is sensitive to the scale of the input features.
If features are not normalized, features with larger values can dominate the distance calculation, resulting in biased community detection results. Feature normalization ensures that each feature contributes equally to the distance calculation.

== Scaling node properties

Most of the features in the survey dataset range from one to five.
However, a few of the features have different scales, and we have also introduce one-hot-encoding which has only two values 0 and 1.
Therefore, we must scale node properties to ensure that all features are equally represented by the KMeans algorithm.
Graph Data Science library offers a `gds.scaleProperties` procedure that helps us with feature normalization.

First, we need to project an in-memory graph and include the **vector** node property we calculated in the previous module.

[source,cypher]
----
CALL gds.graph.project('survey', 'Person', '*',
  {nodeProperties:['vector']});
----

The `gds.scaleProperties` offers six different normalization methods:

* Min-max scaler
* Max scaler
* Mean scaler
* Log scaler
* Standard Score
* Center

In this example, we will utilize the Min-max scaler for feature normalization.
We will use the `mutate` mode as we want to store the results back to the projected in-memory graph.

[source,cypher]
----
CALL gds.scaleProperties.mutate(
  'survey',
  {nodeProperties: ['vector'],
   scaler: 'MinMax',
   mutateProperty: 'scaledVector'
  }
)
----


== Check your understanding


include::questions/1-euclidean.adoc[leveloffset=+1]

include::questions/2-scaler.adoc[leveloffset=+1]

[.summary]
== Summary

In this lesson you learned how to scale node properties using a dedicated procedure in Neo4j Graph Data Science library.

In the next lesson, you will learn how to use KMeans algorithm to perform community detection task.
